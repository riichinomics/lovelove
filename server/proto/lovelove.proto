syntax = "proto3";
package lovelove;

enum Hana {
	Ayame = 0;
	Botan = 1;
	Fuji = 2;
	Hagi = 3;
	Kiku = 4;
	Kiri = 5;
	Matsu = 6;
	Momiji = 7;
	Sakura = 8;
	Susuki = 9;
	Ume = 10;
	Yanagi = 11;
}

enum Variation {
	First = 0;
	Second = 1;
	Third = 2;
	Fourth = 3;
}

enum PlayerActionType {
	None = 0;
	HandCardPlayOpportunity = 1;
	DeckCardPlayOpportunity = 2;
	DeclareWinOpportunity = 3;
}

enum PlayerPosition {
	Red = 0;
	White = 1;
}

service LoveLove {
	rpc SayHello (HelloRequest) returns (HelloReply) {}

	rpc Authenticate (AuthenticateRequest) returns (AuthenticateResponse) {}

	rpc ConnectToGame (ConnectToGameRequest) returns (ConnectToGameResponse) {}
}

message Wrapper {
	int32 sequence = 1;
	string type = 2;
	bytes data = 3;
}

message HelloRequest {
	string name = 1;
}

message HelloReply {
	string message = 1;
}

message ConnectToGameRequest {
	string roomId = 1;
}

message ConnectToGameResponse {
	PlayerPosition position = 1;
	CompleteGameState gameState = 2;
}

message Card {
	int32 id = 1;
	Hana hana = 2;
	Variation variation = 3;
}

message PlayOptions {
	repeated int32 options = 1;
}

message PlayerAction {
	PlayerActionType type = 1;
	map<int32, PlayOptions> playOptions = 2;
}

message CompleteGameState {
	int32 deck = 1;
	Card deckFlipCard = 2;
	repeated Card table = 3;
	repeated Card hand = 4;
	repeated Card collection = 5;
	int32 opponentHand = 6;
	repeated Card opponentCollection = 7;
	PlayerPosition oya = 8;
	PlayerPosition active = 9;
	PlayerAction action = 10;
}

message AuthenticateRequest {
	string userId = 1;
}

message AuthenticateResponse {
}